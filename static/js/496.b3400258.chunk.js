"use strict";(self.webpackChunkproject_mania=self.webpackChunkproject_mania||[]).push([[496],{8496:function(e,n,a){a.r(n),a.d(n,{default:function(){return A}});var r=a(4165),t=a(5861),s=a(4942),i=a(1413),c=a(9439),o=a(2791),l=a(5305),d=a(1908),u=a(9143),h=a(995),f=a(7425),m=a(3853),p=a(184),x=function(e){var n=e.readOnly,a=e.setHeader,r=e.header,t=e.handleSaveHeader,s=e.toggleReadOnly,i=(0,o.useRef)(),c=(0,l.Z)().userInfo;return(0,o.useEffect)((function(){n||i.current.focus()}),[n]),(0,p.jsxs)("div",{className:"user-header-container",children:[(0,p.jsx)("textarea",{className:"user-header",ref:i,readOnly:n,onChange:function(e){a(e.target.value)},defaultValue:c.header}),n&&(0,p.jsx)(h.Z,{icon:(0,p.jsx)(f.HuK,{className:"icon"}),onClick:s,title:"Edit header"}),!n&&(0,p.jsx)(h.Z,{icon:(0,p.jsx)(m.UgA,{className:"icon green"}),onClick:function(){return t(r.trim())},title:"Save changes"})]})},v=a(7640),j=a(9434),g=a(1270),Z=function(e){var n=e.closeHeaderModal;return(0,p.jsxs)("div",{className:"header-modal",children:[(0,p.jsx)("p",{children:"Enhance you profile"}),(0,p.jsx)("button",{className:"btn white",onClick:n,children:"Add a header"})]})},w=a(6419),N=a(1242),b=a(736),S=a(7545),k=a(1427),y=a(3884),A=function(){var e=(0,l.Z)(),n=e.user,a=e.userInfo,m=e.profileImage,A=e.userName,P=e.setProfileImage,R=e.loadProfileImage,C=(0,o.useState)(!0),O=(0,c.Z)(C,2),z=O[0],_=O[1],E=(0,o.useState)(""),H=(0,c.Z)(E,2),I=H[0],M=H[1],D=(0,o.useState)(!0),F=(0,c.Z)(D,2),L=F[0],U=F[1],W=(0,j.I0)(),T=((0,o.useRef)(),(0,o.useState)(!0)),q=(0,c.Z)(T,2),V=q[0],$=(q[1],(0,o.useState)({email:null===a||void 0===a?void 0:a.email,newPassword:"",currentPassword:""})),B=(0,c.Z)($,2),G=B[0],J=B[1],K=(0,w.Z)().showError,X=(0,o.useState)(!1),Q=(0,c.Z)(X,2),Y=Q[0],ee=Q[1],ne=function(){return _(!z)},ae=function(e){J((0,i.Z)((0,i.Z)({},G),{},(0,s.Z)({},e.target.name,e.target.value)))},re=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n,t){var s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.oH)(a._id,n);case 3:if((0,N.s)(N.q.PASSWORD,t)){e.next=6;break}return K(b.R.INVALID_PASSWORD_FORMAT),e.abrupt("return");case 6:return e.next=8,(0,v.rX)(a._id,t);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),(s=e.t0.response).data.error&&s.status,K(s.data.error);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n,a){return e.apply(this,arguments)}}(),te=function(){var e=(0,t.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length||U(!0),a.header!==n){e.next=3;break}return e.abrupt("return");case 3:return _(!0),e.next=6,(0,v.Nq)((0,i.Z)((0,i.Z)({},a),{},{header:n}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),se=function(e){var s=new FileReader;s.readAsDataURL(e),s.onload=(0,t.Z)((0,r.Z)().mark((function e(){var t,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.result,e.next=3,(0,v.Nk)({email:a.email,imgData:t});case 3:i=e.sent,c=i.data,P(Buffer.from(c)),W((0,g.pT)(n._id||n.user_id));case 7:case"end":return e.stop()}}),e)})))};return(0,o.useEffect)((function(){a&&R()}),[a]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(k.Z,{}),(0,p.jsx)("div",{className:"profile-container",children:a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"img-container",children:[(0,p.jsx)("div",{className:"profile-img-container",children:m?(0,p.jsx)("img",{src:m,alt:"profile"}):(0,p.jsx)(u.Z,{})}),(0,p.jsx)("input",{type:"file",id:"imgUpload",accept:"image/png, image/jpeg",onChange:function(e){se(e.target.files[0])}}),(0,p.jsx)("label",{htmlFor:"imgUpload",title:"Upload an image. JPEG/PNG only. Max size: 5Mb",children:(0,p.jsx)(h.Z,{icon:(0,p.jsx)(f.jV5,{className:"icon"})})})]}),(0,p.jsx)("h1",{children:A}),(0,p.jsx)("div",{className:"header-container",children:null!==a&&void 0!==a&&a.header?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x,{readOnly:z,setReadOnly:_,header:I,setHeader:M,handleSaveHeader:te,toggleReadOnly:ne})}):(0,p.jsx)(p.Fragment,{children:L?(0,p.jsx)(Z,{closeHeaderModal:function(){U(!1),_(!1)}}):(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(x,{readOnly:z,setReadOnly:_,header:I,setHeader:M,toggleReadOnly:ne,handleSaveHeader:te})})})}),(0,p.jsx)("h4",{children:"Email address"}),(0,p.jsx)("span",{id:"email",children:null===a||void 0===a?void 0:a.email}),(0,p.jsxs)("div",{className:"form-container",children:[(0,p.jsx)("button",{type:"button",className:"btn link",onClick:function(){ee(!Y)},children:"Change password"}),(0,p.jsx)("form",{className:Y?"open":"",onSubmit:function(){return re(null===G||void 0===G?void 0:G.currentPassword,null===G||void 0===G?void 0:G.newPassword)},children:(0,p.jsxs)("div",{className:"form-inputs-container",children:[(0,p.jsx)(S.Z,{type:V?"password":"text",name:"currentPassword",text:"Current password",placeholderText:"Current password",onChange:ae,value:null===G||void 0===G?void 0:G.currentPassword}),(0,p.jsx)(S.Z,{type:"password",name:"newPassword",text:"New password",placeholderText:"New password",onChange:ae,value:null===G||void 0===G?void 0:G.newPassword}),(0,p.jsx)("div",{className:"buttons-container",children:(0,p.jsx)("button",{type:"button",className:"btn form",children:"Save changes"})})]})})]}),(0,p.jsx)(y.Z,{}),(0,p.jsxs)("p",{children:["Member since ",(0,p.jsx)("span",{children:new Date(null===a||void 0===a?void 0:a.created_at).toLocaleDateString()})]})]}):(0,p.jsx)(d.Z,{})})]})}},1427:function(e,n,a){a(2791);var r=a(7692),t=a(7689),s=a(184);n.Z=function(){var e=(0,t.s0)();return(0,s.jsxs)("button",{className:"back-button link",onClick:function(){return e(-1)},children:[(0,s.jsx)(r.gbs,{className:"icon"}),"Back"]})}},1908:function(e,n,a){a.d(n,{Z:function(){return s}});a(2791);var r=a.p+"static/media/small_spinner.6a57de156310fc958e15b73dd3e6bcc4.svg",t=a(184),s=function(e){var n=e.spinnerWidth;return(0,t.jsx)("div",{className:"spinner-container small",children:(0,t.jsx)("img",{src:r,alt:"loading",width:n||null})})}},1242:function(e,n,a){a.d(n,{q:function(){return i},s:function(){return c}});var r=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g,t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/gm,s=/([a-zA-Z]{3,30}\s*)+/,i={EMAIL:"email",PASSWORD:"password",NAME:"name"},c=function(e,n){var a=r,c=t,o=s;switch(e){case i.EMAIL:return n.match(a);case i.PASSWORD:return n.match(c);case i.NAME:return n.match(o);default:return!1}}}}]);
//# sourceMappingURL=496.b3400258.chunk.js.map