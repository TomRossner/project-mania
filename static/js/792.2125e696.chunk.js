"use strict";(self.webpackChunkproject_mania=self.webpackChunkproject_mania||[]).push([[792],{2792:function(n,e,i){i.r(e);var t=i(4165),s=i(5861),r=i(1413),a=i(3433),l=i(9439),c=i(2791),u=i(2048),o=i(995),d=i(9143),f=i(2741),m=i(6419),x=i(9126),h=i(9132),j=i(6747),v=i(1823),p=i(9434),Z=i(2696),g=i(1270),b=i(6594),_=i(184);e.default=function(){var n=(0,f.Z)(),e=n.userInfo,i=n.userName,k=(0,m.Z)(),N=k.currentProject,O=k.handleOpenAdminModal,w=k.projectAdmins,C=k.isAdmin,I=(0,c.useState)([]),E=(0,l.Z)(I,2),F=E[0],A=E[1],S=(0,c.useState)(!1),y=(0,l.Z)(S,2),z=y[0],H=y[1],M=(0,p.I0)();(0,b.Z)({events:{online:function(n){F.some((function(e){return e._id===n.userId}))&&A((0,a.Z)(F.map((function(e){return e._id===n.userId?(0,r.Z)((0,r.Z)({},e),{},{online:!0}):e}))))},offline:function(n){F.some((function(e){return e._id===n.userId}))&&A((0,a.Z)(F.map((function(e){return e._id===n.userId?(0,r.Z)((0,r.Z)({},e),{},{online:!1}):e}))))}}});var P=function(n){return(0,_.jsx)(x.KC7,{className:!0===n.online?"icon online-status green":"icon online-status grey"})},R=function(n){return n.base64_img_data?Buffer.from(n.base64_img_data):n.img_url.toString()},Y=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(){var e,i,s,r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:H(!0),e=[],i=(0,t.Z)().mark((function n(){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,h.CX)(w[s]);case 2:if(i=n.sent,!F.some((function(n){return n.email===i.email}))){n.next=6;break}return n.abrupt("return",{v:H(!1)});case 6:e.push(i);case 7:case"end":return n.stop()}}),n)})),s=0;case 4:if(!(s<w.length)){n.next=12;break}return n.delegateYield(i(),"t0",6);case 6:if("object"!==typeof(r=n.t0)){n.next=9;break}return n.abrupt("return",r.v);case 9:s++,n.next=4;break;case 12:A(e);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){if(F.length)return H(!1)}),[F]),(0,c.useEffect)((function(){N&&w.length&&Y()}),[w]),(0,c.useEffect)((function(){w.length&&w.includes(null===e||void 0===e?void 0:e.email)&&M((0,g.nZ)(!0))}),[w]),(0,c.useEffect)((function(){if(!N&&(w.length||F.length)||null===N||void 0===N||!N.admins.length)return M((0,Z.zm)([])),void A([]);null!==N&&void 0!==N&&N.admins.length&&M((0,Z.zm)(N.admins))}),[N]),(0,_.jsxs)("div",{className:"current-project-admins",children:[(0,_.jsxs)("div",{className:"flex-align space-between",children:[(0,_.jsx)("span",{children:"PROJECT ADMINS"}),C?(0,_.jsx)("button",{className:"btn link text-blue no-scale",onClick:function(){return n=null===e||void 0===e?void 0:e.email,void M((0,Z.Ce)((0,r.Z)((0,r.Z)({},N),{},{admins:(0,a.Z)(N.admins.filter((function(e){return e!==n})))})));var n},children:"Remove admin access"}):(0,_.jsx)("button",{className:"btn link text-blue no-scale",onClick:O,children:"Get admin access"})]}),(0,_.jsx)("div",{className:"admins",children:z?(0,_.jsxs)("div",{id:"admins-spinner",children:[(0,_.jsx)(v.Z,{width:"30px"}),(0,_.jsx)("h3",{children:"Loading..."})]}):(0,_.jsx)(_.Fragment,{children:null===F||void 0===F?void 0:F.map((function(n){return n.email===(null===e||void 0===e?void 0:e.email)?(0,_.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{src:R(e)}),(0,_.jsx)(o.Z,{title:null!==e&&void 0!==e&&e.online?"Online":"Offline",icon:P(e)})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z,{}),(0,_.jsx)(o.Z,{title:null!==e&&void 0!==e&&e.online?"Online":"Offline",icon:P(e)})]}),(0,_.jsxs)("span",{children:[i," (You)"]})]},(0,j.H)()):(0,_.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(u.Z,{src:R(n)}),(0,_.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:P(n)})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z,{}),(0,_.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:P(n)})]}),(0,_.jsxs)("span",{children:[n.first_name," ",n.last_name]})]},(0,j.H)())}))})})]})}}}]);
//# sourceMappingURL=792.2125e696.chunk.js.map