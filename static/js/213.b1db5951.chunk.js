"use strict";(self.webpackChunkproject_mania=self.webpackChunkproject_mania||[]).push([[213],{3213:function(n,e,i){i.r(e);var t=i(4165),s=i(5861),r=i(1413),a=i(3433),l=i(9439),c=i(2791),u=i(2048),o=i(995),d=i(9143),f=i(5305),m=i(6419),h=i(9126),x=i(7046),j=i(6747),v=(i(7145),i(1823)),Z=i(9434),p=i(2696),g=i(1270),_=i(6594),b=i(184);e.default=function(){var n=(0,f.Z)(),e=n.userInfo,i=n.user,k=n.userName,O=(0,m.Z)(),w=O.currentProject,N=O.handleOpenAdminModal,C=O.projectAdmins,I=O.isAdmin,E=(0,c.useState)([]),F=(0,l.Z)(E,2),A=F[0],S=F[1],y=(0,c.useState)(!1),z=(0,l.Z)(y,2),H=z[0],M=z[1],P=(0,Z.I0)();(0,_.Z)({events:{online:function(n){A.some((function(e){return e._id===n.userId}))&&S((0,a.Z)(A.map((function(e){return e._id===n.userId?(0,r.Z)((0,r.Z)({},e),{},{online:!0}):e}))))},offline:function(n){A.some((function(e){return e._id===n.userId}))&&S((0,a.Z)(A.map((function(e){return e._id===n.userId?(0,r.Z)((0,r.Z)({},e),{},{online:!1}):e}))))}}});var R=function(n){return(0,b.jsx)(h.KC7,{className:n.online?"icon online-status green":"icon online-status grey"})},Y=function(n){return n.base64_img_data?Buffer.from(n.base64_img_data):n.img_url.toString()},B=function(){var n=(0,s.Z)((0,t.Z)().mark((function n(){var e,i,s,r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:M(!0),e=[],i=(0,t.Z)().mark((function n(){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.CX)(C[s]);case 2:if(i=n.sent,!A.some((function(n){return n.email===i.email}))){n.next=6;break}return n.abrupt("return",{v:M(!1)});case 6:e.push(i);case 7:case"end":return n.stop()}}),n)})),s=0;case 4:if(!(s<C.length)){n.next=12;break}return n.delegateYield(i(),"t0",6);case 6:if("object"!==typeof(r=n.t0)){n.next=9;break}return n.abrupt("return",r.v);case 9:s++,n.next=4;break;case 12:S(e);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){if(A.length)return M(!1)}),[A]),(0,c.useEffect)((function(){w&&C.length&&B()}),[C]),(0,c.useEffect)((function(){C.length&&C.includes(null===e||void 0===e?void 0:e.email)&&P((0,g.nZ)(!0))}),[C]),(0,c.useEffect)((function(){if(!w&&(C.length||A.length)||null===w||void 0===w||!w.admins.length)return P((0,p.zm)([])),void S([]);null!==w&&void 0!==w&&w.admins.length&&P((0,p.zm)(w.admins))}),[w]),(0,b.jsxs)("div",{className:"current-project-admins",children:[(0,b.jsx)("span",{children:"PROJECT ADMINS"}),(0,b.jsx)("div",{className:"admins",children:H?(0,b.jsxs)("div",{id:"admins-spinner",children:[(0,b.jsx)(v.Z,{width:"30px"}),(0,b.jsx)("h3",{children:"Loading..."})]}):(0,b.jsx)(b.Fragment,{children:null===A||void 0===A?void 0:A.map((function(n){return n.email===(null===i||void 0===i?void 0:i.email)?(0,b.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Z,{src:Y(e)}),(0,b.jsx)(o.Z,{title:null!==e&&void 0!==e&&e.online?"Online":"Offline",icon:R(e)})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{}),(0,b.jsx)(o.Z,{title:null!==e&&void 0!==e&&e.online?"Online":"Offline",icon:R(e)})]}),(0,b.jsxs)("span",{children:[k," (You)"]})]},(0,j.H)()):(0,b.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Z,{src:Y(n)}),(0,b.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:R(n)})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{}),(0,b.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:R(n)})]}),(0,b.jsxs)("span",{children:[n.first_name," ",n.last_name]})]},(0,j.H)())}))})}),I?(0,b.jsx)("button",{className:"btn white no-scale",onClick:function(){return n=null===e||void 0===e?void 0:e.email,void P((0,p.Ce)((0,r.Z)((0,r.Z)({},w),{},{admins:(0,a.Z)(w.admins.filter((function(e){return e!==n})))})));var n},children:"Remove admin access"}):(0,b.jsx)("button",{className:"btn white no-scale",onClick:N,children:"Get admin access"})]})}}}]);
//# sourceMappingURL=213.b1db5951.chunk.js.map