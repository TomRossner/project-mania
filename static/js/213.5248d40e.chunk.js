"use strict";(self.webpackChunkproject_mania=self.webpackChunkproject_mania||[]).push([[213],{3213:function(n,e,i){i.r(e);var t=i(4165),r=i(5861),s=i(1413),a=i(3433),u=i(9439),c=i(2791),l=i(2048),o=i(995),d=i(9143),f=i(5305),m=i(6419),h=i(9126),x=i(7046),v=i(6747),j=i(7145),p=i(1823),Z=i(9434),g=i(2696),b=i(1270),_=i(184);e.default=function(){var n=(0,f.Z)(),e=n.userInfo,i=n.user,k=n.userName,w=(0,m.Z)(),I=w.currentProject,N=w.handleOpenAdminModal,O=w.projectAdmins,E=w.isAdmin,A=(0,c.useState)([]),C=(0,u.Z)(A,2),F=C[0],S=C[1],y=(0,c.useState)(!1),L=(0,u.Z)(y,2),W=L[0],z=L[1],B=(0,Z.I0)();j.Wb.on("online",(function(n){F.some((function(e){return e._id===n.userId}))&&S((0,a.Z)(F.map((function(e){return e._id===n.userId?(0,s.Z)((0,s.Z)({},e),{},{online:!0}):e}))))})),j.Wb.on("offline",(function(n){F.some((function(e){return e._id===n.userId}))&&S((0,a.Z)(F.map((function(e){return e._id===n.userId?(0,s.Z)((0,s.Z)({},e),{},{online:!1}):e}))))}));var D=function(n){return(0,_.jsx)(h.KC7,{className:n.online?"icon online-status green":"icon online-status grey"})},H=function(n){return n.base64_img_data?Buffer.from(n.base64_img_data):n.img_url.toString()},M=function(){var n=(0,r.Z)((0,t.Z)().mark((function n(){var e,i,r,s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:z(!0),e=[],i=(0,t.Z)().mark((function n(){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.CX)(O[r]);case 2:if(i=n.sent,!F.some((function(n){return n.email===i.email}))){n.next=6;break}return n.abrupt("return",{v:z(!1)});case 6:e.push(i);case 7:case"end":return n.stop()}}),n)})),r=0;case 4:if(!(r<O.length)){n.next=12;break}return n.delegateYield(i(),"t0",6);case 6:if("object"!==typeof(s=n.t0)){n.next=9;break}return n.abrupt("return",s.v);case 9:r++,n.next=4;break;case 12:S(e);case 13:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){if(F.length)return z(!1)}),[F]),(0,c.useEffect)((function(){I&&O.length&&M()}),[O]),(0,c.useEffect)((function(){O.length&&O.includes(null===e||void 0===e?void 0:e.email)&&B((0,b.nZ)(!0))}),[O]),(0,c.useEffect)((function(){if(!I&&(O.length||F.length))return B((0,g.zm)([])),void S([]);null!==I&&void 0!==I&&I.admins.length&&B((0,g.zm)(I.admins))}),[I]),(0,c.useEffect)((function(){var n=function(){j.Wb.emit("unload",{userId:null===e||void 0===e?void 0:e._id})};return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}}),[e]),(0,_.jsxs)("div",{className:"current-project-admins",children:[(0,_.jsx)("span",{children:"BOARD ADMINS"}),(0,_.jsx)("div",{className:"admins",children:W?(0,_.jsxs)("div",{id:"admins-spinner",children:[(0,_.jsx)(p.Z,{width:"30px"}),(0,_.jsx)("h3",{children:"Loading..."})]}):(0,_.jsx)(_.Fragment,{children:null===F||void 0===F?void 0:F.map((function(n){return n.email===(null===i||void 0===i?void 0:i.email)?(0,_.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Z,{src:H(e)}),(0,_.jsx)(o.Z,{title:null!==e&&void 0!==e&&e.online?"Online":"Offline",icon:D(e)})]}):(0,_.jsx)(d.Z,{}),(0,_.jsxs)("span",{children:[k," (You)"]})]},(0,v.H)()):(0,_.jsxs)("div",{className:"admin",children:[n.img_url||n.base64_img_data?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.Z,{src:H(n)}),(0,_.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:D(n)})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Z,{}),(0,_.jsx)(o.Z,{title:n.online?"Online":"Offline",icon:D(n)})]}),(0,_.jsxs)("span",{children:[n.first_name," ",n.last_name]})]},(0,v.H)())}))})}),E?(0,_.jsx)("button",{className:"btn link",onClick:N,children:"I'm an admin"}):null]})}}}]);
//# sourceMappingURL=213.5248d40e.chunk.js.map