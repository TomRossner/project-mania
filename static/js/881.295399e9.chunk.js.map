{"version":3,"file":"static/js/881.295399e9.chunk.js","mappings":"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","sources":["components/common/BackButton.js","components/pages/users/UserTab.js","components/pages/users/Users.js"],"sourcesContent":["import React from 'react';\r\nimport { BiChevronLeft } from \"react-icons/bi\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst BackButton = () => {\r\n  const navigate = useNavigate();\r\n  const handleClick = () => navigate(-1);\r\n  \r\n  return (\r\n    <button type='button' className='back-button link' onClick={handleClick}><BiChevronLeft className='icon'/>Back</button>\r\n  )\r\n}\r\n\r\nexport default BackButton;","import React from 'react';\r\nimport ProfilePicture from '../../common/ProfilePicture';\r\nimport BlankProfilePicture from '../../common/BlankProfilePicture';\r\nimport { BsCircleFill } from 'react-icons/bs';\r\nimport IconContainer from '../../common/IconContainer';\r\n\r\nconst UserTab = ({user, onClick, additionalContent}) => {\r\n    const onlineStatusIcon = (user) => {\r\n        return <BsCircleFill className={user.online ? 'icon online-status green' : 'icon online-status grey'}/>\r\n    }\r\n\r\n    const checkProfileURL = (user) => {\r\n        return user.base64_img_data ? Buffer.from(user.base64_img_data) : user.img_url.toString();\r\n    }\r\n    \r\n  return (\r\n    <div className='user-tab' onClick={onClick}>\r\n        {user.base64_img_data || user.img_url\r\n            ? <ProfilePicture src={checkProfileURL(user)}/>\r\n            : <BlankProfilePicture/>\r\n        }\r\n        \r\n        <IconContainer title={user.online ? 'Online' : 'Offline'} icon={onlineStatusIcon(user)}/>\r\n\r\n        <div className='user-tab-content'>\r\n            <h4>{user.first_name} {user.last_name}</h4>\r\n            {user.header ? <p>{user.header}</p> : null}\r\n        </div>\r\n\r\n        <div id='userTabAdditionalContent'>{additionalContent ? additionalContent : null}</div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserTab;","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport BackButton from '../../common/BackButton';\r\nimport SearchBar from '../../common/SearchBar';\r\nimport { fetchMembersAsync } from '../../../store/members/members.actions';\r\nimport Line from '../../common/Line';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport UserTab from './UserTab';\r\nimport { generateKey } from '../../../utils/keyGenerator';\r\nimport useProject from '../../../hooks/useProject';\r\nimport { BsPlus, BsSearch} from \"react-icons/bs\";\r\nimport IconContainer from '../../common/IconContainer';\r\nimport { IoPersonCircleOutline } from 'react-icons/io5';\r\nimport useChat from '../../../hooks/useChat';\r\nimport { AiOutlineMinus } from 'react-icons/ai';\r\nimport useMembers from '../../../hooks/useMembers';\r\nimport useSocketEvents from '../../../hooks/useSocketEvents';\r\nimport { setTargetUser, setUserProfileOpen } from '../../../store/globalStates/globalStates.actions';\r\n\r\nconst Users = () => {\r\n  const {members} = useMembers();\r\n  const {user, userInfo} = useAuth();\r\n  const dispatch = useDispatch();\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const {\r\n    currentProject,\r\n    handleAddMember,\r\n    handleRemoveMemberFromProject,\r\n    isAdmin\r\n  } = useProject();\r\n  const {fetchUserChats} = useChat();\r\n\r\n  // Check search input\r\n  const checkSearchInput = (input) => {\r\n    if (members.some(member => member.first_name.toLowerCase().includes(input.toLowerCase()) ||\r\n      member.last_name.toLowerCase().includes(input.toLowerCase()))\r\n    ) {\r\n      const matchingUsers = [...members?.filter(member => member.first_name.toLowerCase().includes(input.toLowerCase()) ||\r\n      member.last_name.toLowerCase().includes(input.toLowerCase()))];\r\n\r\n      setSearchResults([...matchingUsers]);\r\n    }\r\n  }\r\n\r\n  // Handle input change\r\n  const handleInputChange = (e) => {\r\n    setInputValue(e.target.value);\r\n  }\r\n\r\n  const handleViewProfile = (user) => {\r\n    // Set targetUser\r\n    dispatch(setTargetUser(user));\r\n\r\n    // Open user profile\r\n    dispatch(setUserProfileOpen(true));\r\n  }\r\n\r\n  // Check search input\r\n  useEffect(() => {\r\n    if (!inputValue.length || !inputValue) setSearchResults([]);\r\n    checkSearchInput(inputValue);\r\n  }, [inputValue]);\r\n\r\n  // Fetch all users and all current user's chats\r\n  useEffect(() => {\r\n    dispatch(fetchMembersAsync());\r\n    fetchUserChats();\r\n  }, []);\r\n\r\n\r\n  // Handle searchResults on Online event\r\n  const handleOnline = (data) => {\r\n    if (searchResults.length && searchResults.some(res => res._id === data.userId)) {\r\n      setSearchResults([...searchResults.map(searchRes => {\r\n        if (searchRes._id === data.userId) {\r\n          return {...searchRes, online: true};\r\n        } else return searchRes;\r\n      })])\r\n    }\r\n  }\r\n\r\n  // Handle searchResults on Offline event\r\n  const handleOffline = (data) => {\r\n    if (searchResults.length && searchResults.some(res => res._id === data.userId)) {\r\n      setSearchResults([...searchResults.map(searchRes => {\r\n        if (searchRes._id === data.userId) {\r\n          return {...searchRes, online: false};\r\n        } else return searchRes;\r\n      })])\r\n    }\r\n  }\r\n \r\n  // Listen to socket events\r\n  useSocketEvents({\r\n    events: {\r\n      online: handleOnline,\r\n      offline: handleOffline\r\n    }\r\n  });\r\n\r\n  const userAdditionalContent = (member) => <>\r\n    <div className='buttons-container'>\r\n\r\n      <button className='btn white' onClick={() => handleViewProfile(member)} title={`View ${member.first_name}'s profile`}>\r\n        <IconContainer icon={<IoPersonCircleOutline className='icon xl'/>}/>\r\n        <span className='btn-text'>View profile</span>\r\n      </button>\r\n\r\n      {currentProject?.members?.some(m => m._id === member._id)\r\n        && isAdmin\r\n        &&  <button className='btn white' title={`Remove ${member.first_name} from project`} onClick={() => handleRemoveMemberFromProject(member._id)}>\r\n              <IconContainer icon={<AiOutlineMinus className='icon'/>}/>\r\n              <span className='btn-text'>Remove from project</span>\r\n            </button>\r\n      }\r\n\r\n      {!currentProject?.members?.some(m => m._id === member._id)\r\n        && isAdmin\r\n        &&  <button className='btn white' title={`Add ${member.first_name} to project`} onClick={() => handleAddMember(member)}>\r\n              <IconContainer icon={<BsPlus className='icon xl'/>}/>\r\n              <span className='btn-text'>Add to project</span>\r\n            </button>\r\n      }\r\n\r\n      </div>\r\n  </>\r\n\r\n  return (\r\n      <>\r\n        <div className='users-container'>\r\n\r\n          <BackButton/>\r\n\r\n          <div className='title'>\r\n            <h1>Users</h1>\r\n            <SearchBar\r\n              value={inputValue}\r\n              fn={handleInputChange}\r\n              placeholderText={\"Search users\"}\r\n              icon={<IconContainer icon={<BsSearch className='icon'/>}/>}\r\n            />\r\n          </div>\r\n\r\n            <div className='results-container'>\r\n              <p>{members?.filter(member => member._id !== user?._id).length} {members?.filter(member => member._id !== user?._id).length === 1 ? \"user found\": \"users found\"}</p>\r\n              <Line/>\r\n              <h3>Results <span>({searchResults.filter(user => user._id !== userInfo?._id).length})</span></h3>\r\n              <div className='grid-container'>\r\n                {searchResults.length\r\n                  ? <>\r\n                      {searchResults?.filter(member => member._id !== user?._id).map(member => {\r\n                        return (\r\n                          <>\r\n                          <div key={generateKey()} className='search-result'>\r\n                            <UserTab user={member} onClick={() => handleViewProfile(member)} additionalContent={userAdditionalContent(member)}/>\r\n                          </div>\r\n                          </>\r\n                        )\r\n                      })}\r\n                    </>\r\n                  : members?.filter(m => m._id !== user?._id).map(member => {\r\n                      return (\r\n                        <div key={generateKey()} className='search-result'>\r\n                          <UserTab user={member} additionalContent={userAdditionalContent(member)}/>\r\n                        </div>\r\n                      )\r\n                  })\r\n                }\r\n              </div>\r\n              \r\n            </div>\r\n\r\n        </div>\r\n      </>\r\n  )\r\n}\r\n\r\nexport default Users;"],"names":["navigate","useNavigate","_jsxs","type","className","onClick","children","_jsx","BiChevronLeft","_ref","user","additionalContent","base64_img_data","img_url","ProfilePicture","src","Buffer","from","toString","checkProfileURL","BlankProfilePicture","IconContainer","title","online","icon","BsCircleFill","onlineStatusIcon","first_name","last_name","header","id","members","useMembers","_useAuth","useAuth","userInfo","dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","inputValue","setInputValue","_useState3","_useState4","searchResults","setSearchResults","_useProject","useProject","currentProject","handleAddMember","handleRemoveMemberFromProject","isAdmin","fetchUserChats","useChat","handleViewProfile","setTargetUser","setUserProfileOpen","useEffect","length","input","some","member","toLowerCase","includes","matchingUsers","_toConsumableArray","filter","checkSearchInput","fetchMembersAsync","useSocketEvents","events","data","res","_id","userId","map","searchRes","_objectSpread","offline","userAdditionalContent","_currentProject$membe","_currentProject$membe2","_Fragment","concat","IoPersonCircleOutline","m","AiOutlineMinus","BsPlus","BackButton","SearchBar","value","fn","e","target","placeholderText","BsSearch","Line","UserTab","generateKey"],"sourceRoot":""}