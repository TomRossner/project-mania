{"version":3,"file":"static/js/203.2483f166.chunk.js","mappings":"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","sources":["components/pages/chat/ChatInputField.js","components/pages/chat/ChatMessage.js","components/pages/chat/Conversation.js","components/pages/chat/Chat.js","components/pages/chat/ChatFavorites.js","components/pages/chat/ChatContacts.js","components/pages/chat/ChatApp.js","hooks/useMobile.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport { IoMdSend } from 'react-icons/io';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectCurrentContact } from '../../../store/chat/chat.selectors';\r\nimport useChat from '../../../hooks/useChat';\r\nimport { notifyIsNotTyping, notifyIsTyping } from '../../../utils/socket';\r\n\r\nconst ChatInputField = () => {\r\n    const [inputValue, setInputValue] = useState(\"\");\r\n    const {user} = useAuth()\r\n    const inputRef = useRef();\r\n    const currentContact = useSelector(selectCurrentContact);\r\n    const {currentChat, handleSendMessage} = useChat();\r\n    const [isTyping, setIsTyping] = useState(false);\r\n  \r\n    const handleInputChange = (e) => setInputValue(e.target.value);\r\n  \r\n    const resetInputValue = () => setInputValue(\"\");\r\n  \r\n    const handleMessageSubmit = (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (!inputValue || !currentChat || !currentContact) return;\r\n\r\n        const date = new Date();\r\n\r\n        const newMessage = {\r\n            text: inputValue,\r\n            from: user._id,\r\n            sent_at: date.toISOString(),\r\n            to: currentContact._id,\r\n        };\r\n\r\n        // Send message\r\n        handleSendMessage(currentChat._id, newMessage);\r\n\r\n        resetInputValue();\r\n    }\r\n\r\n    // Set isTyping\r\n    useEffect(() => {\r\n        if (!inputValue) {\r\n           setIsTyping(false);\r\n           notifyIsNotTyping(currentChat?._id, currentContact?.socket_id, user._id);\r\n           return;\r\n        }\r\n\r\n        if (isTyping) return;\r\n\r\n        setIsTyping(true);\r\n\r\n    }, [inputValue]);\r\n\r\n    // Notify contact is typing if isTyping is true\r\n    useEffect(() => {\r\n        if (!isTyping) return;\r\n\r\n        notifyIsTyping(currentChat?._id, currentContact?.socket_id, user._id);\r\n        \r\n    }, [isTyping]);\r\n\r\n  return (\r\n    <form id='chat-input-container' onSubmit={handleMessageSubmit}>\r\n        <input\r\n            type=\"text\"\r\n            name=\"chat_input\"\r\n            id=\"chat_input\"\r\n            onChange={handleInputChange}\r\n            value={inputValue}\r\n            placeholder=\"Type a message...\"\r\n            ref={inputRef}\r\n        />\r\n        <button type='submit' className='icon-span' onClick={handleMessageSubmit}>\r\n            <IoMdSend className='icon large'/>\r\n        </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ChatInputField;","import React from 'react';\r\nimport { AM_PM } from '../../../utils/timeFormats';\r\n\r\nconst ChatMessage = ({msg, currentContact}) => {\r\n    const {sent_at, text, from} = msg;\r\n    \r\n  return (\r\n    <>\r\n      <div className={from !== currentContact?._id ? 'message-container right-side' : 'message-container'}>\r\n        <p className='message'>{text}</p>\r\n        <span>{AM_PM(sent_at)}</span>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ChatMessage;","import React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectFavorites } from '../../../store/chat/chat.selectors';\r\nimport useChat from '../../../hooks/useChat';\r\nimport Line from '../../common/Line';\r\nimport ChatMessage from './ChatMessage';\r\nimport { generateKey } from '../../../utils/keyGenerator';\r\nimport ProfilePicture from '../../common/ProfilePicture';\r\nimport BlankProfilePicture from '../../common/BlankProfilePicture';\r\nimport { setChat, setFavorites } from '../../../store/chat/chat.actions';\r\nimport useSocketEvents from '../../../hooks/useSocketEvents';\r\nimport Space from '../../common/Space';\r\nimport IconContainer from '../../common/IconContainer';\r\nimport { AiOutlineUser } from 'react-icons/ai';\r\nimport { BsStarFill } from 'react-icons/bs';\r\nimport { lastSeenTime } from '../../../utils/timeFormats';\r\nimport { updateUser } from '../../../services/api/http.auth';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport { setTargetUser, setUserProfileOpen } from '../../../store/globalStates/globalStates.actions';\r\n\r\nconst Conversation = () => {\r\n    const {currentContact, messages, currentChat, setMessages} = useChat();\r\n    const [contactName, setContactName] = useState('');\r\n    const dispatch = useDispatch();\r\n    const messagesBottomRef = useRef(null);\r\n    const [isTyping, setIsTyping] = useState(false);\r\n    const {userInfo} = useAuth();\r\n    const favorites = useSelector(selectFavorites);\r\n\r\n    // Handle isTyping\r\n    const handleIsTyping = (data) => {\r\n        if (data.userId === currentContact._id) {\r\n            setIsTyping(true);\r\n        }\r\n    }\r\n\r\n    // Handle isNotTyping\r\n    const handleIsNotTyping = (data) => {\r\n        if (data.userId === currentContact._id) {\r\n            setIsTyping(false);\r\n        }\r\n    }\r\n\r\n    // Listen to socket events\r\n    useSocketEvents({\r\n        events: {\r\n            typing: handleIsTyping,\r\n            notTyping: handleIsNotTyping\r\n        }\r\n    });\r\n\r\n    const handleViewProfile = (user) => {\r\n        // Set targetUser\r\n        dispatch(setTargetUser(user));\r\n    \r\n        // Open user profile\r\n        dispatch(setUserProfileOpen(true));\r\n    }\r\n\r\n    // Handle add to favorites\r\n    const handleAddToFavorites = async (contactId) => {\r\n        if (favorites.some(favId => favId === contactId)) {\r\n            // Remove from favorites\r\n\r\n            await updateUser({\r\n                ...userInfo,\r\n                favorites: [...userInfo.favorites.filter(favId => favId !== contactId)]\r\n            });\r\n\r\n            dispatch(setFavorites([...favorites.filter(favId => favId !== contactId)]));\r\n\r\n        } else {\r\n            // Add to favorites\r\n\r\n            await updateUser({\r\n                ...userInfo,\r\n                favorites: [...userInfo.favorites, contactId]\r\n            });\r\n\r\n            dispatch(setFavorites([...favorites, contactId]));\r\n        }\r\n    }\r\n\r\n    // Set contact name\r\n    useEffect(() => {\r\n        if (!currentContact) return setContactName('');\r\n        setContactName(`${currentContact.first_name} ${currentContact.last_name}`);\r\n    }, [currentContact]);\r\n\r\n    // Refresh messages\r\n    useEffect(() => {\r\n        if (!currentChat) return;\r\n        dispatch(setMessages([...currentChat?.messages]));\r\n\r\n        // Set isTyping to false if isTyping is active and the user switches chats\r\n        if (currentChat && isTyping) {\r\n            setIsTyping(false);\r\n        }\r\n    }, [currentChat]);\r\n\r\n    // Scroll to last message\r\n    useEffect(() => {\r\n        const scrollToBottom = () => {\r\n            messagesBottomRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n        }\r\n\r\n        scrollToBottom();\r\n    }, [messages]);\r\n\r\n    // Update message's seen property\r\n    useEffect(() => {\r\n        if (currentChat?.messages?.some(msg => msg.seen === false)) {\r\n            dispatch(setChat({\r\n                ...currentChat,\r\n                messages: [...currentChat?.messages?.map(msg => {\r\n                    if (msg.seen === false) {\r\n                        return {...msg, seen: true};\r\n                    } else return msg;\r\n            })]}));\r\n        }\r\n    }, []);\r\n\r\n  return (\r\n    <div className='conversation-container'>\r\n        {contactName &&\r\n            <div className='profile'>\r\n                {currentContact?.base64_img_data || currentContact?.img_url\r\n                    ? <ProfilePicture src={currentContact?.base64_img_data || currentContact?.img_url}/>\r\n                    : <BlankProfilePicture/>\r\n                }\r\n                <div className='contact-name'>\r\n                    <h3>{contactName}</h3>\r\n                    {currentContact?.online === true\r\n                        ? <p className='green'>online</p>\r\n                        : <p>last seen {lastSeenTime(currentContact?.last_seen)}</p>\r\n                    }\r\n                </div>\r\n                <Space/>\r\n                <button className='btn' title='Add to favorites' onClick={() => handleAddToFavorites(currentContact?._id)}>\r\n                    <IconContainer icon={<BsStarFill className={favorites.includes(currentContact?._id) ? 'icon star' : 'icon'}/>}/>\r\n                </button>\r\n                <button className='btn white' title='View profile' onClick={() => handleViewProfile(currentContact)}>\r\n                    <IconContainer icon={<AiOutlineUser className='icon xl'/>}/>\r\n                    <span className='text'>View profile</span>\r\n                </button>\r\n            </div>\r\n        }\r\n\r\n        <Line/>\r\n        <div className='conversation'>\r\n            {messages?.length ? messages?.map(msg => {\r\n                return <ChatMessage key={generateKey()} msg={msg} currentContact={currentContact}/>\r\n            }) : null}\r\n            <div>\r\n                {isTyping ? <p className='typing'>{currentContact?.first_name} is typing...</p> : null}\r\n            </div>\r\n            <div className='messages-bottom' ref={messagesBottomRef}></div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Conversation;","import React, { useEffect, useState } from 'react';\r\nimport ProfilePicture from '../../common/ProfilePicture';\r\nimport Space from '../../common/Space';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport useChat from '../../../hooks/useChat';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setChatSideBarOpen, setCurrentContact } from '../../../store/chat/chat.actions';\r\nimport BlankProfilePicture from '../../common/BlankProfilePicture';\r\nimport IconContainer from '../../common/IconContainer';\r\nimport {MdDoneAll} from \"react-icons/md\";\r\nimport { AM_PM } from '../../../utils/timeFormats';\r\nimport { fetchChatAsync } from '../../../store/chat/chat.actions';\r\n\r\nconst Chat = ({contactId, messages, isTyping}) => {\r\n    const {getContactInfo} = useChat();\r\n    const {userInfo} = useAuth();\r\n    const dispatch = useDispatch();\r\n    const [lastMessage, setLastMessage] = useState(null);\r\n    const [unseenMessages, setUnseenMessages] = useState(0);\r\n    const [contact, setContact] = useState(null);\r\n\r\n    // Load chat\r\n    const loadChat = async (userId, contactId) => {\r\n      const contact = await getContactInfo(contactId);\r\n      dispatch(setCurrentContact(contact));\r\n      dispatch(fetchChatAsync(userId, contactId));\r\n    }\r\n\r\n    // Handle chat click\r\n    const handleChatClick = async (contactId) => {\r\n      loadChat(userInfo?._id, contactId);\r\n      dispatch(setChatSideBarOpen(false));\r\n    }\r\n\r\n    // Set last message and unseen messages\r\n    useEffect(() => {\r\n      if (!messages?.length) return;\r\n      setLastMessage(messages[messages.length - 1]);\r\n      setUnseenMessages(messages.filter(msg => msg.seen === false && msg.from !== userInfo?._id).length);\r\n    }, [messages]);\r\n\r\n    // Refresh contact\r\n    const refreshContact = async (contactId) => {\r\n        const contact = await getContactInfo(contactId);\r\n        setContact(contact);\r\n    }\r\n\r\n    // Load contact\r\n    useEffect(() => {\r\n      refreshContact(contactId);\r\n    }, []);\r\n\r\n  return (\r\n    <div\r\n      className='contact'\r\n      onClick={() => handleChatClick(contactId)}\r\n    >\r\n        <div className='contact-image'>\r\n          {contact?.base64_img_data || contact?.img_url\r\n            ? <ProfilePicture src={contact?.base64_img_data || contact?.img_url}/>\r\n            : <BlankProfilePicture/>\r\n          }\r\n        </div>\r\n\r\n        <div className='contact-content'>\r\n          <h3 className='contact-name'>{contact?.first_name} {contact?.last_name}</h3>\r\n          <span className='last-time-message-sent'>{lastMessage?.sent_at ? AM_PM(lastMessage?.sent_at) : null}</span>\r\n          <p className='last-message'>\r\n            {isTyping\r\n              ? <span className='typing green'>typing...</span>\r\n              : <>\r\n                  {lastMessage?.from === userInfo?._id\r\n                    ? <>\r\n                        {lastMessage?.seen === true\r\n                          ? <><IconContainer icon={<MdDoneAll className='icon green'/>}/>{lastMessage?.text}</>\r\n                          : <><IconContainer icon={<MdDoneAll className='icon'/>}/>{lastMessage?.text}</>\r\n                        }\r\n                      </>\r\n                    : lastMessage?.text\r\n                  }\r\n                </>\r\n            }\r\n            \r\n          </p>\r\n          <Space/>\r\n          {/* {lastMessage?.seen === false && unseenMessages\r\n            ? \r\n              <div className='unseen-messages-count-container'>\r\n                <span className='unseen-messages-count'>{unseenMessages}</span>\r\n              </div>\r\n            : null\r\n          } */}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chat;","import React, { Suspense, useEffect, useState } from 'react';\r\nimport IconContainer from '../../common/IconContainer';\r\nimport { BsStarFill } from 'react-icons/bs';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setFavorites, setFavoritesChats } from '../../../store/chat/chat.actions';\r\nimport { selectFavorites, selectFavoritesChats } from '../../../store/chat/chat.selectors';\r\nimport Chat from './Chat';\r\nimport useSocketEvents from '../../../hooks/useSocketEvents';\r\nimport Spinner from '../../common/Spinner';\r\nimport useChat from '../../../hooks/useChat';\r\n\r\nconst ChatFavorites = () => {\r\n  const favorites = useSelector(selectFavorites);\r\n  const {userInfo} = useAuth();\r\n  const dispatch = useDispatch();\r\n  const [typingStates, setTypingStates] = useState({});\r\n  const favoritesChats = useSelector(selectFavoritesChats);\r\n  const {sortChats} = useChat();\r\n\r\n  // Listen to socket events\r\n  useSocketEvents({\r\n      events: {\r\n          typing: ({chatId}) => {\r\n              setTypingStates({...typingStates, [chatId]: true,});\r\n          },\r\n          notTyping: ({chatId}) => {\r\n              setTypingStates({...typingStates, [chatId]: false,});\r\n          },\r\n      },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!userInfo) return;\r\n    dispatch(setFavorites([...userInfo?.favorites]));\r\n  }, [userInfo]);\r\n\r\n  useEffect(() => {\r\n    if (!favorites.length && favoritesChats.length) {\r\n      dispatch(setFavoritesChats([]));\r\n      return;\r\n    }\r\n\r\n  }, [favorites]);\r\n\r\n\r\n  return (\r\n    <div className='favorites-container'>\r\n\r\n        <div className='chat-title'>\r\n          <IconContainer icon={<BsStarFill className='icon star'/>}/>\r\n          <h3>Favorites</h3>\r\n        </div>\r\n\r\n        <Suspense fallback={<Spinner/>}>\r\n          <div className='favorites'>\r\n            {favoritesChats?.length\r\n              ? <>\r\n                {sortChats(favoritesChats).map(favChat => {\r\n                  return (\r\n                    <Chat\r\n                        key={favChat?._id}\r\n                        contactId={favChat?.users.find(uid => uid !== userInfo?._id)}\r\n                        messages={favChat?.messages}\r\n                        isTyping={typingStates[favChat?._id]}\r\n                    />\r\n                  )\r\n                })}\r\n                </>\r\n              : null\r\n            }\r\n          </div>\r\n        </Suspense>\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatFavorites;","import React, {Suspense, useEffect, useState} from 'react';\r\nimport Spinner from '../../common/Spinner';\r\nimport IconContainer from '../../common/IconContainer';\r\nimport { BsChatLeftTextFill } from 'react-icons/bs';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectChats, selectContacts, selectFavorites } from '../../../store/chat/chat.selectors';\r\nimport Chat from './Chat';\r\nimport useSocketEvents from '../../../hooks/useSocketEvents';\r\nimport useChat from '../../../hooks/useChat';\r\n\r\nconst ChatContacts = () => {\r\n    const {userInfo} = useAuth();\r\n    const chats = useSelector(selectChats);\r\n    const contacts = useSelector(selectContacts);\r\n    const [typingStates, setTypingStates] = useState({});\r\n    const {fetchUserChats, sortChats} = useChat();\r\n    const favorites = useSelector(selectFavorites);\r\n\r\n    // Listen to socket events\r\n    useSocketEvents({\r\n        events: {\r\n            typing: ({chatId}) => {\r\n                setTypingStates({...typingStates, [chatId]: true,});\r\n            },\r\n            notTyping: ({chatId}) => {\r\n                setTypingStates({...typingStates, [chatId]: false,});\r\n            },\r\n        },\r\n    });\r\n\r\n    // Fetch user chats\r\n    useEffect(() => {\r\n        if (!contacts.length) return;\r\n        \r\n        // Fetching user chats\r\n        if (userInfo) fetchUserChats();\r\n\r\n    }, [contacts, favorites]);\r\n\r\n  return (\r\n      <div className='chat-contacts'>\r\n\r\n            <div className='chat-title'>\r\n                <IconContainer icon={<BsChatLeftTextFill className='icon small blue'/>}/>\r\n                <h3>Chats</h3>\r\n            </div>\r\n\r\n            <Suspense fallback={<Spinner/>}>\r\n                {chats?.length\r\n                    ? sortChats(chats).map(chat => {\r\n                        return (\r\n                            <Chat\r\n                                key={chat._id}\r\n                                contactId={chat.users?.find(uid => uid !== userInfo?._id)}\r\n                                messages={chat.messages}\r\n                                isTyping={typingStates[chat._id]}\r\n                            />\r\n                        )\r\n                    })\r\n                    : null\r\n                }\r\n            </Suspense>\r\n\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default ChatContacts;","import React, { useEffect, useRef, useState } from 'react';\r\nimport ChatInputField from './ChatInputField';\r\nimport IconContainer from '../../common/IconContainer';\r\nimport useChat from '../../../hooks/useChat';\r\nimport Conversation from './Conversation';\r\nimport useAuth from '../../../hooks/useAuth';\r\nimport { BsChevronRight, BsSearch} from 'react-icons/bs';\r\nimport BlankProfilePicture from '../../common/BlankProfilePicture';\r\nimport ProfilePicture from '../../common/ProfilePicture';\r\nimport { getChat } from '../../../services/api/http.chat';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchChatAsync, setChatSideBarOpen, setContacts, setCurrentContact } from '../../../store/chat/chat.actions';\r\nimport { setCurrentProject } from '../../../store/project/project.actions';\r\nimport ChatFavorites from './ChatFavorites';\r\nimport SearchBar from '../../common/SearchBar';\r\nimport ChatContacts from './ChatContacts';\r\nimport useProject from '../../../hooks/useProject';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport useMobile from '../../../hooks/useMobile';\r\nimport {HiOutlineChatBubbleLeftRight} from \"react-icons/hi2\";\r\nimport { selectChatSideBarOpen } from '../../../store/chat/chat.selectors';\r\n\r\nconst ChatApp = () => {\r\n  const {loadContacts, contacts, createNewChat, getContactInfo, currentChat} = useChat();\r\n  const {userInfo} = useAuth();\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  const [isSearching, setIsSearching] = useState(false);\r\n  const inputRef = useRef(null);\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const {currentProject} = useProject();\r\n  const navigate = useNavigate();\r\n  const {isMobile} = useMobile();\r\n  const chatSideBarOpen = useSelector(selectChatSideBarOpen);\r\n\r\n  // Update search value\r\n  const handleSearchChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n  }\r\n\r\n  // Check if inputs match contact names\r\n  const checkContactNames = (searchValue) => {\r\n    const value = searchValue.toLowerCase();\r\n\r\n    const matchingContacts = contacts.filter(contact =>\r\n      contact.first_name.toLowerCase().includes(value)\r\n      || contact.last_name.toLowerCase().includes(value)\r\n      || (contact.first_name.toLowerCase() || contact.last_name.toLowerCase()) === value\r\n      || contact.first_name.toLowerCase() + ' ' + contact.last_name.toLowerCase() === value\r\n    );\r\n    \r\n    // Set search results\r\n    setSearchResults(matchingContacts);\r\n  }\r\n\r\n  // Check if chat exists, if not create new chat\r\n  const handleContactClick = async (contact) => {\r\n\r\n    // Check if exists\r\n    const chatAlreadyExists = await getChat(userInfo?._id, contact._id);\r\n\r\n    if (chatAlreadyExists) {\r\n      getContactInfo(userInfo?._id, contact._id);\r\n\r\n      dispatch(setCurrentContact(contact));\r\n\r\n      setIsSearching(false);\r\n      setSearchValue(\"\");\r\n    } else {\r\n      // Create chat\r\n      await createNewChat(userInfo?._id, contact);\r\n\r\n      dispatch(setCurrentContact(contact));\r\n\r\n      setIsSearching(false);\r\n      setSearchValue(\"\");\r\n    }\r\n  }\r\n\r\n  // Refresh current chat\r\n  const refreshCurrentChat = () => {\r\n    dispatch(fetchChatAsync(currentChat.users[0], currentChat.users[1]));\r\n  }\r\n\r\n  // Toggle chat side bar\r\n  const toggleChatSideBar = () => {\r\n    dispatch(setChatSideBarOpen(!chatSideBarOpen));\r\n  }\r\n\r\n  // Set isSearching\r\n  useEffect(() => {\r\n    if (inputRef.current && searchValue.length) {\r\n      setIsSearching(true);\r\n    } else setIsSearching(false);\r\n  }, [searchValue]);\r\n\r\n  // Check if inputs match contact names\r\n  useEffect(() => {\r\n    if (!searchValue.length) return;\r\n    checkContactNames(searchValue);\r\n  }, [searchValue]);\r\n\r\n  // Set currentProject to null\r\n  useEffect(() => {\r\n    if (currentProject) dispatch(setCurrentProject(null));\r\n  }, []);\r\n\r\n  // Remove current user from contacts\r\n  useEffect(() => {\r\n    if (!contacts.length) return;\r\n\r\n    const isInContacts = contacts.some(contact => contact._id === userInfo?._id);\r\n\r\n    if (isInContacts) {\r\n      dispatch(setContacts([...contacts.filter(c => c._id !== userInfo?._id)]));\r\n    }\r\n    \r\n  }, [contacts]);\r\n\r\n  useEffect(() => {\r\n    if (!userInfo) return;\r\n\r\n    // Load contacts\r\n    loadContacts();\r\n\r\n    // Refresh current chat\r\n    if (currentChat) {\r\n      refreshCurrentChat();\r\n    } else dispatch(setChatSideBarOpen(true));\r\n  }, []);\r\n\r\n  // Redirect to homepage\r\n  useEffect(() => {\r\n    if (!userInfo) navigate('/');\r\n  }, []);\r\n\r\n  return (\r\n    <div className='main-chat-container'>\r\n      <div className={chatSideBarOpen ? 'left open' : 'left'}>\r\n        <IconContainer icon={<BsChevronRight className='icon'/>} additionalClass={isMobile ? 'mobile' : 'not-mobile'} onClick={toggleChatSideBar}/>\r\n\r\n        <div className='main-chat-title'>\r\n          <IconContainer icon={<HiOutlineChatBubbleLeftRight className='icon'/>}/>\r\n          <h1>Chat</h1>\r\n        </div>\r\n\r\n        <SearchBar\r\n          type=\"text\"\r\n          refValue={inputRef}\r\n          placeholderText='Search'\r\n          fn={handleSearchChange}\r\n          value={searchValue}\r\n          icon={<IconContainer icon={<BsSearch className='icon'/>}/>}\r\n        />\r\n\r\n        {isSearching\r\n        ? <div className='chat-search-results'>\r\n            {searchResults.length\r\n            ? searchResults.map(res => (\r\n              <div key={res._id} className='profile' onClick={() => handleContactClick(res)}>\r\n                {res.base64_img_data || res.img_url\r\n                  ? <ProfilePicture src={res.base64_img_data || res.img_url}/>\r\n                  : <BlankProfilePicture/>\r\n                }\r\n                <span>{res.first_name} {res.last_name}</span>\r\n              </div>\r\n            ))\r\n            : null}\r\n          </div>\r\n        : (\r\n          <>\r\n            <ChatFavorites/>\r\n            <ChatContacts/>\r\n          </>\r\n        )}\r\n\r\n      </div>\r\n\r\n      <div className='right'>\r\n        <Conversation/>\r\n        <ChatInputField/>\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatApp;","import { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setIsMobile } from '../store/globalStates/globalStates.actions';\r\nimport { selectIsMobile } from '../store/globalStates/globalStates.selector';\r\n\r\nconst useMobile = () => {\r\n    const isMobile = useSelector(selectIsMobile);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleResize = () => {\r\n        if (window.innerWidth <= 1280) {\r\n            dispatch(setIsMobile(true));\r\n        } else {\r\n            dispatch(setIsMobile(false));\r\n        }\r\n    };\r\n\r\n   // Handle screen size\r\n    useEffect(() => {\r\n    \r\n        window.addEventListener('load', handleResize);\r\n        window.addEventListener('resize', handleResize);\r\n    \r\n        return () => {\r\n            window.removeEventListener('load', handleResize);\r\n            window.removeEventListener('resize', handleResize);\r\n        };\r\n    }, []);\r\n\r\n  return {\r\n    isMobile\r\n  }\r\n}\r\n\r\nexport default useMobile;"],"names":["_useState","useState","_useState2","_slicedToArray","inputValue","setInputValue","user","useAuth","inputRef","useRef","currentContact","useSelector","selectCurrentContact","_useChat","useChat","currentChat","handleSendMessage","_useState3","_useState4","isTyping","setIsTyping","handleMessageSubmit","e","preventDefault","date","Date","newMessage","text","from","_id","sent_at","toISOString","to","useEffect","notifyIsNotTyping","socket_id","notifyIsTyping","_jsxs","id","onSubmit","children","_jsx","type","name","onChange","target","value","placeholder","ref","className","onClick","IoMdSend","_ref","msg","_Fragment","AM_PM","messages","setMessages","contactName","setContactName","dispatch","useDispatch","messagesBottomRef","userInfo","favorites","selectFavorites","useSocketEvents","events","typing","data","userId","notTyping","handleAddToFavorites","_asyncToGenerator","_regeneratorRuntime","mark","_callee","contactId","wrap","_context","prev","next","some","favId","updateUser","_objectSpread","_toConsumableArray","filter","setFavorites","concat","stop","_x","apply","arguments","first_name","last_name","current","scrollIntoView","behavior","_currentChat$messages","_currentChat$messages2","seen","setChat","map","base64_img_data","img_url","ProfilePicture","src","BlankProfilePicture","online","lastSeenTime","last_seen","Space","title","IconContainer","icon","BsStarFill","includes","setTargetUser","setUserProfileOpen","AiOutlineUser","Line","length","ChatMessage","generateKey","getContactInfo","lastMessage","setLastMessage","setUnseenMessages","_useState5","_useState6","contact","setContact","loadChat","_ref2","sent","setCurrentContact","fetchChatAsync","_x2","handleChatClick","_ref3","_callee2","_context2","setChatSideBarOpen","_x3","refreshContact","_ref4","_callee3","_context3","_x4","MdDoneAll","typingStates","setTypingStates","favoritesChats","selectFavoritesChats","sortChats","chatId","_defineProperty","setFavoritesChats","Suspense","fallback","Spinner","favChat","Chat","users","find","uid","chats","selectChats","contacts","selectContacts","fetchUserChats","BsChatLeftTextFill","chat","_chat$users","loadContacts","createNewChat","searchValue","setSearchValue","isSearching","setIsSearching","searchResults","setSearchResults","currentProject","useProject","navigate","useNavigate","isMobile","useMobile","chatSideBarOpen","selectChatSideBarOpen","handleContactClick","getChat","toLowerCase","matchingContacts","checkContactNames","setCurrentProject","setContacts","c","BsChevronRight","additionalClass","HiOutlineChatBubbleLeftRight","SearchBar","refValue","placeholderText","fn","BsSearch","res","ChatFavorites","ChatContacts","Conversation","ChatInputField","selectIsMobile","handleResize","window","innerWidth","setIsMobile","addEventListener","removeEventListener"],"sourceRoot":""}